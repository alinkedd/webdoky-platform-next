# Платформа проекту webdoky.org

[![uk](https://img.shields.io/badge/lang-uk-green.svg)](https://github.com/webdoky/platform/blob/master/README.md)
<!-- [![en](https://img.shields.io/badge/lang-en-green.svg)](https://github.com/webdoky/platform/blob/master/README.en.md) -->

## Що це

Це генератор статичного вебстайту, збудований на базі [NextJS](https://nextjs.org/), який відповідальний за функціонал, і зовнішній вигляд проєкту WebDoky.

За його вміст відповідає [ось цей](https://github.com/webdoky/content) репозиторій, а для коректної навігації ми користуємося оригінальним [репозиторієм MDN](https://github.com/mdn/content).

## Як це запустити

1. Склонуйте цей репозиторій (разом з підмодулями) у будь-яке зручне місце:

    ```sh
    git clone --recurse-submodules git@github.com:webdoky/platform-next.git
    ```

2. Перейдіть всередину і встановіть необхідні залежності:

    ```sh
    yarn
    ```

    > Якщо ця команда викинула помилку — впевніться, що у вас встановлено NodeJs, NPM та Yarn

3. Підготуйте конфігурацію проекта у файлі `.env.local` (файл локальної конфігурації NextJS). Для цього можна скористатися підготовленим прикладом у файлі `.env.example`:

    ```sh
    mv ./.env.example ./.env.local
    ```

4. Перед збиранням власне застосунку слід окремо підготувати його вміст, це найбілш часозатратна операція. :

    ```sh
    yarn pre-build
    ```

5. Запустіть проект:

    ```sh
    yarn dev
    ```

    Також можна одразу згенерувати готовий статичний вебсайт:

    ```sh
    yarn build
    ```

    > Загалом тут збережена конфігурація команд типового NextJS-проекту.

## Структура файлів репозиторію

- `./pages` — шаблони сторінок та документу
- `./components` — файли компонентів застосунку
- `./styles` — файли стилів застосунку
- `./content` — підвантажувачі даних для самого застосунку
- `./docs` — файли внутрішньої документації проекту webdoky.org
- `./utils` — загальні функції та утиліти

- `./pre-build` — тут зосереджена логіка, яка відповідає за підготовку вмісту для подальшого використання під час збирання застосунку. Зокрема, тут виконуються такі етапи:

  - Зчитування файлів статей, їхня обробка та збереження результату у файловому кеші
  - Екстракція інтерактивних прикладів, збереження їх у вигляді окремих HTML-файлів
  - Екстракція файлів зображень і збереження їх у вигляді, придатному для подальшого використання фреймворком
  - ...та ін.

- `./public` — вміщує всі статичні файли проекту (включно також із тими, які створюються на етапі попередньої обробки вмісту).
- `./external` — підмодулі з текстовим вмістом та частиною інтерактивних прикладів
- `./cache` — тимчасовий файловий кеш, куди складаються результати виконання попередньої обробки вмісту.
